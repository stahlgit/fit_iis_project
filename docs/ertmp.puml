@startuml

' Enumeration for UserRole
enum UserRole {
    ADMIN
    REGISTERED
    GUEST
}

' Entity: Conference
class conferences {
    <<pk>> id : int
    name : string
    description : string?
    genre : string?
    place : string?
    start_time : datetime
    end_time : datetime
    price : float?
    capacity : int?
}

' Entity: User
class users {
    <<pk>> id : int
    name : string
    email : string
    role : UserRole
    hashed_password : string
    is_active : bool = false
    is_superuser : bool = false
}

' Entity: Room
class rooms {
    <<pk>> id : int
    name : string
    capacity : int?
    conference_id : int
}

' Entity: Reservation
class reservations {
    <<pk>> id : int
    number_of_tickets : int
    status : string?
    paid : bool
    user_id : int?
    conference_id : int
}

' Entity: Ticket
class tickets {
    <<pk>> id : int
    created_at : datetime
    reservation_id : int
}

' Entity: Lecture
class lectures {
    <<pk>> id : int
    name : string
    description : string?
    start_time : datetime
    end_time : datetime
    tags : string?
    image : string?
    room_id : int
    conference_id : int
    lecturer_id : int
}

' Entity: GivenPresentation
class given_presentation {
    <<pk>> id : int
    user_id : int
    conference_id : int
    proposal : string?
    status : string
}

' Entity: Voting
class voting {
    <<pk>> id : int
    user_id : int
    lecture_id : int
    rating : int
}

' Entity: Question
class questions {
    <<pk>> id : int
    text : string
    user_id : int
    lecture_id : int
}

' Relationships
Conference "1" -- "0..*" Room : rooms
Conference "1" -- "0..*" Lecture : lectures
Conference "1" -- "0..*" Reservation : reservations
Conference "1" -- "0..*" GivenPresentation : given_presentations
User "1" -- "0..*" Reservation : reservations
User "1" -- "0..*" Lecture : lectures
User "1" -- "0..*" Voting : votings
User "1" -- "0..*" Question : questions
User "1" -- "0..*" GivenPresentation : given_presentations
Room "1" -- "0..*" Lecture : lectures
Reservation "1" -- "0..*" Ticket : tickets
Lecture "1" -- "0..*" Voting : votings
Lecture "1" -- "0..*" Question : questions

@enduml
